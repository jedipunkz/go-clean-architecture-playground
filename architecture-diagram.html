<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆå›³</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .diagram {
            margin: 30px 0;
            text-align: center;
        }
        .description {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .layer-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .layer-card {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .layer-card h3 {
            margin-top: 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Go ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆå›³</h1>
        
        <div class="description">
            <p>ã“ã®å›³ã¯ã€Goè¨€èªã§å®Ÿè£…ã—ãŸã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>
            <p>å„å±¤ã¯æ˜ç¢ºãªè²¬ä»»ã‚’æŒã¡ã€ä¾å­˜é–¢ä¿‚ãŒå†…å´ã®å±¤ï¼ˆEntityï¼‰ã«å‘ã‹ã£ã¦ä¸€æ–¹å‘ã«æµã‚Œã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
        </div>

        <h2>ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆå›³</h2>
        <div class="diagram">
            <div class="mermaid">
graph TB
    subgraph "å¤–éƒ¨"
        Client[HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ<br/>ğŸŒ]
    end
    
    subgraph "Interface Layerï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å±¤ï¼‰"
        Controller[UserController<br/>ğŸ“¡ HTTP Handler]
        RepoInterface[UserRepository<br/>ğŸ“‹ Interface]
    end
    
    subgraph "Use Case Layerï¼ˆãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ï¼‰"
        UseCase[UserUsecase<br/>âš™ï¸ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
    end
    
    subgraph "Entity Layerï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±¤ï¼‰"
        Entity[User Entity<br/>ğŸ‘¤ ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«]
    end
    
    subgraph "Infrastructure Layerï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å±¤ï¼‰"
        Repository[MemoryUserRepository<br/>ğŸ’¾ ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–]
    end
    
    subgraph "Mainï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰"
        Main[main.go<br/>ğŸ”§ DI Container]
    end

    Client --> Controller
    Controller --> UseCase
    UseCase --> RepoInterface
    UseCase --> Entity
    Repository -.-> RepoInterface
    Main --> Controller
    Main --> UseCase
    Main --> Repository

    classDef entity fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef usecase fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef interface fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef infrastructure fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef main fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef external fill:#f0f0f0,stroke:#616161,stroke-width:2px

    class Entity entity
    class UseCase usecase
    class Controller,RepoInterface interface
    class Repository infrastructure
    class Main main
    class Client external
            </div>
        </div>

        <h2>ä¾å­˜é–¢ä¿‚ã®æ–¹å‘</h2>
        <div class="diagram">
            <div class="mermaid">
graph LR
    Infrastructure[Infrastructure<br/>ğŸ—ï¸ ã‚¤ãƒ³ãƒ•ãƒ©å±¤] --> Interface[Interface<br/>ğŸ”Œ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å±¤]
    Interface --> UseCase[Use Case<br/>âš™ï¸ ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤]
    UseCase --> Entity[Entity<br/>ğŸ‘¤ ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±¤]
    Main[Main<br/>ğŸ”§ DI] --> Infrastructure
    Main --> Interface
    Main --> UseCase

    classDef layer fill:#f9f9f9,stroke:#333,stroke-width:3px,color:#333
    class Infrastructure,Interface,UseCase,Entity,Main layer
            </div>
        </div>

        <h2>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³</h2>
        <div class="diagram">
            <div class="mermaid">
sequenceDiagram
    participant C as Client
    participant Ctrl as UserController
    participant UC as UserUsecase
    participant E as User Entity
    participant R as UserRepository

    C->>Ctrl: POST /users
    Ctrl->>UC: CreateUser(name, email)
    UC->>E: NewUser(name, email)
    E-->>UC: User entity
    UC->>R: Create(user)
    R-->>UC: Success
    UC-->>Ctrl: Created user
    Ctrl-->>C: JSON response
            </div>
        </div>

        <div class="layer-info">
            <div class="layer-card">
                <h3>ğŸ—ï¸ Infrastructure Layer</h3>
                <p><strong>è²¬ä»»</strong>: å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å®Ÿéš›ã®æ¥ç¶š</p>
                <p><strong>å®Ÿè£…</strong>: MemoryUserRepository</p>
                <p><strong>ç‰¹å¾´</strong>: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€APIã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®å…·ä½“çš„ãªå®Ÿè£…</p>
            </div>
            
            <div class="layer-card">
                <h3>ğŸ”Œ Interface Layer</h3>
                <p><strong>è²¬ä»»</strong>: å¤–éƒ¨ã¨ã®å…¥å‡ºåŠ›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</p>
                <p><strong>å®Ÿè£…</strong>: UserController, UserRepository Interface</p>
                <p><strong>ç‰¹å¾´</strong>: HTTP ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¨ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</p>
            </div>
            
            <div class="layer-card">
                <h3>âš™ï¸ Use Case Layer</h3>
                <p><strong>è²¬ä»»</strong>: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«</p>
                <p><strong>å®Ÿè£…</strong>: UserUsecase</p>
                <p><strong>ç‰¹å¾´</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã€æ›´æ–°ã€å‰Šé™¤ãªã©ã®æ¥­å‹™ãƒ•ãƒ­ãƒ¼</p>
            </div>
            
            <div class="layer-card">
                <h3>ğŸ‘¤ Entity Layer</h3>
                <p><strong>è²¬ä»»</strong>: æ ¸ã¨ãªã‚‹ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ãƒ«ãƒ¼ãƒ«</p>
                <p><strong>å®Ÿè£…</strong>: User Entity</p>
                <p><strong>ç‰¹å¾´</strong>: æœ€ã‚‚å†…å´ã§ã€ä»–ã«ä¾å­˜ã—ãªã„ç´”ç²‹ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</p>
            </div>
        </div>

        <div class="description">
            <h3>ğŸ”— ä¾å­˜é–¢ä¿‚é€†è»¢ã®åŸå‰‡</h3>
            <p>å¾“æ¥ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ä¸Šä½å±¤ãŒä¸‹ä½å±¤ã«ä¾å­˜ã—ã¾ã™ãŒã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ï¼š</p>
            <ul>
                <li><strong>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ´»ç”¨</strong>: UseCase ã¯ Repository ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜</li>
                <li><strong>å…·è±¡ã¸ã®éä¾å­˜</strong>: UseCase ã¯å…·ä½“çš„ãª Repository å®Ÿè£…ã‚’çŸ¥ã‚‰ãªã„</li>
                <li><strong>DI ã«ã‚ˆã‚‹çµåˆ</strong>: main.go ã§å®Ÿéš›ã®å®Ÿè£…ã‚’æ³¨å…¥</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#f8f9fa'
            }
        });
    </script>
</body>
</html>